<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Data Visualizer</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gradient-to-b from-white to-blue-300 text-gray-800 font-sans min-h-screen flex flex-col justify-center">

    <!-- Form chart containerization -->
    <div class="container mx-auto p-6 flex flex-col items-center space-y-8">
        
        <!-- Header Section -->
        <div class="bg-gray-800 p-4 w-full max-w-lg rounded-t-lg text-center">
            <h1 class="text-white text-2xl font-light">Stock Data Visualizer</h1>
        </div>

        <!-- Form Section -->
        <div class="bg-white w-full max-w-lg p-8 rounded-lg shadow-lg text-center">
            <h2 class="text-2xl font-light text-gray-800">Select Stock Data Options</h2>
            <p class="text-lg text-gray-600 mt-4 mb-6">Please fill in the options below to generate a stock chart.</p>

            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <ul class="list-none space-y-2">
                        {% for message in messages %}
                            <li class="text-red-600">{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            {% endwith %}

            <form action="{{ url_for('display_chart') }}" method="POST" class="flex flex-col space-y-4">
                <div>
                    <label for="stock_symbol" class="text-gray-700 font-medium">Choose Symbol:</label>
                    <select id="stock_symbol" name="stock_symbol" required class="w-full p-3 border border-gray-300 rounded bg-gray-50 text-gray-700">
                        <option value="">Select a Symbol</option>
                        {% for symbol in stock_symbols %}
                            <option value="{{ symbol }}" {% if stock_symbol == symbol %}selected{% endif %}>{{ symbol }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div>
                    <label for="chart_type" class="text-gray-700 font-medium">Choose Chart Type:</label>
                    <select id="chart_type" name="chart_type" required class="w-full p-3 border border-gray-300 rounded bg-gray-50 text-gray-700">
                        <option value="1" {% if chart_type == "1" %}selected{% endif %}>Bar</option>
                        <option value="2" {% if chart_type == "2" %}selected{% endif %}>Line</option>
                    </select>
                </div>

                <div>
                    <label for="time_function" class="text-gray-700 font-medium">Choose Time Series:</label>
                    <select id="time_function" name="time_function" required class="w-full p-3 border border-gray-300 rounded bg-gray-50 text-gray-700">
                        <option value="TIME_SERIES_DAILY" {% if time_function == "TIME_SERIES_DAILY" %}selected{% endif %}>Daily</option>
                        <option value="TIME_SERIES_WEEKLY" {% if time_function == "TIME_SERIES_WEEKLY" %}selected{% endif %}>Weekly</option>
                        <option value="TIME_SERIES_MONTHLY" {% if time_function == "TIME_SERIES_MONTHLY" %}selected{% endif %}>Monthly</option>
                    </select>
                </div>

                <div>
                    <label for="beginning_date" class="text-gray-700 font-medium">Start Date:</label>
                    <input type="date" id="beginning_date" name="beginning_date" value="{{ start_date }}" required
                           class="w-full p-3 border border-gray-300 rounded bg-gray-50 text-gray-700">
                </div>

                <div>
                    <label for="ending_date" class="text-gray-700 font-medium">End Date:</label>
                    <input type="date" id="ending_date" name="ending_date" value="{{ end_date }}" required
                           class="w-full p-3 border border-gray-300 rounded bg-gray-50 text-gray-700">
                </div>

                <button type="submit" class="w-full bg-gray-800 text-white py-3 rounded hover:bg-gray-900 transition duration-300">Generate Chart</button>
            </form>
        </div>

        <!-- Utilized 3380 project generation -->
        {% if chart_data %}
        <div class="bg-white w-full p-8 rounded-lg shadow-lg mt-8">
            <h2 class="text-xl font-medium text-gray-800 text-center mb-4">Generated Chart for {{ stock_symbol }}</h2>
            <div class="flex justify-center">
                <embed type="image/svg+xml" src="{{ chart_data }}" class="w-full h-auto max-w-screen-lg">
            </div>
        </div>
        {% endif %}
    </div>

    
</body>